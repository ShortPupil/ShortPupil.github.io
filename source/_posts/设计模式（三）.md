---
title: 设计模式（三） BUILDER 生成器
copyright: true
date: 2018-11-10 00:03:38
tags: design pattern
---

# 目录

@[toc]



本节关于BUILDER 生成器模式 —— 对象创建模式

 

## 1. 意图

将一个复杂对象的**构建**与它的**表示分离**，使得**同样的构建过程可以创建不同的表示**。



## 2. 动机

如下图，一个Rich Text Format文档交换格式的阅读器能将RTF转换为多种正文格式。该阅读器可以将RTF文档转换为**ASCII文本或转换为一个能以交互方式编辑的正文窗口组件**。

问题：**转换的数目无穷**；需要容易实现新转换的增加，同时不改变RTF阅读器

![](https://raw.githubusercontent.com/ShortPupil/ShortPupil.github.io/hexo/source/_posts/pictures/builder_1.png)

解决方法：TextConverter对象——将RTF转换为另一种正文表示——配置RTFReader类。其负责进行**数据转换以及用特定格式表示该标记**。TextConvert的子类对不同转换和不同格式进行特殊处理。

每种转换器类将创建和装配一个复杂对象的机制隐含在**抽象接口**后面。转换器独立于阅读器，阅读器负责对一个RTF文档进行语法分析。

每一个转换器类在该模式中被称为**生成器（builder）**，而阅读器则称为**导向器（director）**。



## 3. 适用性

- 当创建复杂对象的算法应**独立**于该对象的组成部分以及其装配方式时
- 当构造过程必须允许被构造的对象有**不同的表示**时



## 4. 结构

上图的扩展咯

![](https://raw.githubusercontent.com/ShortPupil/ShortPupil.github.io/hexo/source/_posts/pictures/builder.png)



## 5. 参与者

- Builder (TextConverter)
  - 为创建一个Product对象的各个部件指定抽象接口
- ConcreteBuilder (ASCIIConverter, TeXConverter, TextWidgetConverter)
  - 实现Builder的接口以构造和装配该产品的各个部件
  - 定义并明确它所创建的表示
  - 提供一个检索产品的接口(例如GetASCIIText和GetTextWidget)
- Director (RTFReader)
  - 构造一个使用Builder接口的对象
- Product (ASCIIText, TeXText, TextWidget)
  - 表示被构造的复杂对象。ConcreteBuilder创建该产品的内部表示并定义其装配过程。
  - 包含定义组成部件的类，包括将这些部件装配成最终产品的接口。



## 6. 协作

Builder和Director交互图

![](https://raw.githubusercontent.com/ShortPupil/ShortPupil.github.io/hexo/source/_posts/pictures/jiaohutu_1.png)

- 客户创建Director对象，并用它所想要的Builder对象进行配置
- 一旦产品部件生产，导向器就会通知生成器
- 生成器处理导向器的请求，并将部件添加到该产品中
- 客户从生成器中检索产品



## 7. 效果

- 它使你可以改变一个产品的内部实现
- 它可以将构造代码和表示代码分开
- 它使你可对构造过程进行更精细的控制



## 8. 实现



## 9. 代码示例



## 10. 已知应用



## 11. 相关模式



